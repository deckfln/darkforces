<behaviortree>
	<messages>
		<message id='GameEngine:HEAR_SOUND'>GameEngine:onHearSound</message>
		<message id='GameEngine:VIEW'>GameEngine:onViewPlayer</message>
		<message id='GameEngine:NOT_VIEW'>GameEngine:onNotViewPlayer</message>
		<message id='DarkForces:DYING'>DarkForces:onDying</message>
	</messages>
	<node type='WaitIdle' name='Wait for event'>
	<condition>FAILURE</condition>
	<tree>
	<node type='AttackPlayer' name='attack and track'>
		<tree>
		<node type='Loop' name='find the player, move toward him and shoot at him'>
			<condition>until_one_fail</condition>
			<tree>
			<node type='PlayerVisible' name='Check player'></node>
			<node type='darkForces:sound' name='tease the player'>
				<sounds>
<include file='sounds.inc'/>
				</sounds>
			</node>
			<node type='Fire2Player' name='Shoot player'></node>
			<node type='Move2Player' name='get player position'>
				<walk max='3000' min='1500' random='true'/>
				<tree>
				<node type='SatNav' name='move to player'></node>
					<!--
					<exits>
						<exit value='false'>player_visible</exit>
					</exits>
					-->
				</tree>
			</node>
			</tree>
		</node>
		<node type='TrackPlayer' name='track the player'>
			<walk max='3000' min='1500' random='true'/>
			<tree>
				<node type='SatNav' name='move to player last position'>
					<exits>
						<exit value='true'>player_visible</exit>
						<exit value='true'>hit_bullet</exit>
					</exits>
				</node>
			</tree>
		</node>
		</tree>
	</node>
	<node type='MoveEnemyTo' name='move to destination'>
		<tree>
		<node type='SatNav' name='go to destination'>
			<exits>
				<exit value='"true'>player_visible</exit>
				<exit value='"true'>hit_bullet</exit>
				<exit value='"true'>hear_sound</exit>
			</exits>
		</node>
		<node type='WaitDoor' name='wait for door to open'></node>
		<node type='OpenDoor' name='go to destination'>
			<tree>
			<node type='GotoTrigger' name='try to reach each trigger'>
				<tree>
					<node type='SatNav' name='go to trigger'></node>
					<node type='WaitDoor' name='wait for door to open'></node>
				</tree>
			</node>
			</tree>
		</node>
		</tree>
	</node>
	</tree>
	</node>
</behaviortree>